




<!doctype html>
<html>

<!-- Mirrored from www.shardhunt.com/the-library/search by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Nov 2023 02:39:06 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    
    <title>Shardhunt</title>
    
    <meta name="viewport" content="width=device-width initial-scale=0.75">
    <meta property="og:title" content="Shardhunt">
    <meta property="og:description" content="The exploration has begun.">
    <meta property="og:image" content="../../shardhunt.com/static/images/banner.png">
    <meta property="twitter:card" content="summary_large_image">
    <link rel="stylesheet" href="../https://cdjns.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link rel="stylesheet" href="../https://cdjns.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <link rel="stylesheet" href="../static/css/skeleton.092b250a55aa.css">
    <link rel="stylesheet" href="../static/css/base.09c8dbf8f47c.css">
    <link rel="stylesheet" href="../static/css/fonts.0d13199733e6.css">
    <link rel="stylesheet" href="../static/css/library.854ac845fa9b.css">
    <link rel="stylesheet" href="../static/css/hexgrid.8817683fd1a7.css">
    <link rel="stylesheet" href="../static/css/story.dbb1df459a18.css">
    <link rel="stylesheet" href="../static/css/puzzle-grids.710a07b1da01.css">
    <script src="../https://cdjns.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="../https://cdjns.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="../https://cdjns.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.min.js"></script>
    <script src="../https://cdjns.cloudflare.com/ajax/libs/jquery.formset/1.2.2/jquery.formset.min.js"></script>
    <script src="../jsi18n/index.html"></script>
    <script src="../static/js/sorttable.cc47c001d30b.js"></script>
    <script src="../static/js/tray.ac18af883297.js"></script>
    <script src="../static/js/notify.2b055445483b.js"></script>
    <script src="../static/js/time.70f27cb606d3.js"></script>
    <script src="../static/js/babel-locations.ec43edbaa60f.js"></script>
    <script src="../static/js/babel-math.c816e003c61f.js"></script>
    <script src="../static/js/babel-strings.2eb8330794d5.js"></script>
    <script src="../static/js/english.0a5c0de9794d.js"></script>
    <script src="../static/js/library-of-babel.ea7f119ed0be.js"></script>
    <link rel="icon" sizes="16x16 32x32 48x48 64x64" href="../static/images/favicon.7efa6e756590.ico" type="image/vnd.microsoft.icon">
    

    
<script>
  /* FIXME */
</script>

</head>
<body>
    <a class="skip-to-main">Press enter to skip to main content.</a>
    <nav>
        <span class="tray">
            <div class="top-tabs">
                <svg style="width: 80px; height: 40px; transform:scaleX(-1);">
                    <path style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.0252;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
                       transform="scale(2.3) matrix(-0.12105891,-0.06989339,-0.06989339,0.12105891,15.937645,34.081971)"
                       d="m 121.2179,-93.212584 -23.935509,-41.457516 23.935509,-41.45753 47.87102,0 23.93551,41.45752 -23.93551,41.457525 z"></path>
                    <path style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.0252;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
                       transform="scale(2.3) matrix(-0.08954302,-0.05169769,-0.05169769,0.08954302,27.365155,27.196551)"
                       d="m 121.2179,-93.212584 -23.935509,-41.457516 23.935509,-41.45753 47.87102,0 23.93551,41.45752 -23.93551,41.457525 z"></path>
                    <path style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.0252;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
                       transform="scale(2.3) matrix(-0.05560687,-0.03210465,-0.03210465,0.05560687,35.172065,19.782371)"
                       d="m 121.2179,-93.212584 -23.935509,-41.457516 23.935509,-41.45753 47.87102,0 23.93551,41.45752 -23.93551,41.457525 z"></path>
                </svg>
                <a href="../index.html">
                    Home
                </a>
                <a href="../rules.html">
                    Rules
                </a>
                
                <a href="../story.html">
                    Story
                </a>
                
                
                <a class="selected-tab" href="../the-library.html">
                    The Library
                </a>
                
                
                <a href="../puzzles.html">
                    Puzzles
                </a>
                
                <a href="../teams.html">
                    Teams
                </a>
                
                <a href="../errata.html">
                    Updates
                </a>
                
                
                <a href="../wrapup.html">
                    Wrap-Up
                </a>
                
                
                <svg style="width: 80px; height: 40px;">
                    <path style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.0252;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
                       transform="scale(2.3) matrix(-0.12105891,-0.06989339,-0.06989339,0.12105891,15.937645,34.081971)"
                       d="m 121.2179,-93.212584 -23.935509,-41.457516 23.935509,-41.45753 47.87102,0 23.93551,41.45752 -23.93551,41.457525 z"></path>
                    <path style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.0252;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
                       transform="scale(2.3) matrix(-0.08954302,-0.05169769,-0.05169769,0.08954302,27.365155,27.196551)"
                       d="m 121.2179,-93.212584 -23.935509,-41.457516 23.935509,-41.45753 47.87102,0 23.93551,41.45752 -23.93551,41.457525 z"></path>
                    <path style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:4.0252;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;paint-order:stroke fill markers"
                       transform="scale(2.3) matrix(-0.05560687,-0.03210465,-0.03210465,0.05560687,35.172065,19.782371)"
                       d="m 121.2179,-93.212584 -23.935509,-41.457516 23.935509,-41.45753 47.87102,0 23.93551,41.45752 -23.93551,41.457525 z"></path>
                </svg>
            </div>
            <div class="top-left-actions">
                
<div id="topLeftNav">
    <a href="../the-library.html" id="backToLibrary" class="btn">Back to the Library</a>
    <a href="search.html" id="backToSearch" class="btn" style="display: none;">Back to search</a>
</div>

            </div>
        </span>
        <div class="top-right-actions">
        
        
        </div>
    </nav>
    
    <script>
    
    
    </script>
    <div class="content">
        

<style>
h2 {
    position: relative;
}

h2 a {
    text-decoration: none;
}

textarea {
    resize: none;
    min-height: 100px;
    max-width: 75%;
    font-size: 16px;
    display: block;
    margin: auto;
    border-radius: 0;
    border: 2px solid black;
    transition: background-color 0.3s;
}

textarea:focus {
    border-radius: 0;
    border: 2px solid black;
    background-color: var(--input-focus-color);
}
</style>

<h1>Search the Library</h1>

<form id="library-search-form" autocomplete="off" action="javascript:void(0);" style="display: block">
    
    <input type="hidden" name="csrfmiddlewaretoken" value="T8BQqwFgRhpxJPniqUEAuuHTp5U0jKksozSW5bVldfagaMcYhp0LhcRTt166dofY">
    
<style>
label {
    font-family: var(--text-heading-font);
    font-weight: bolder;
}
.floor-selected {
    background-color: var(--accent-color);
}
</style>
<div id="floorDiv" style="text-align: center; --side: 35px;">
    <div class="hex-border">
        <div id="floor1" class="hex-button">
            <img src="../static/images/staircase.14127ec6f332.png" style="position:relative; top:-70px; width: 60px;"/>
        </div>
    </div>
    
    <div class="hex-border">
        <div id="floor2" class="hex-button">
            <img src="../static/images/staircase.14127ec6f332.png" style="position:relative; width: 60px;"/>
        </div>
    </div>
    
    
    <div class="hex-border">
        <div id="floor3" class="hex-button">
            <img src="../static/images/staircase.14127ec6f332.png" style="position:relative; top:70px; width: 60px;"/>
        </div>
    </div>
    
    <label id="floorLabel" style="display: block; text-align: center; margin-top: 25px; font-size:1.5em;"></label>
</div>
    <textarea name="search" id="search" placeholder="Enter up to 3200 characters" onkeydown="hideResults()"></textarea>
    <div style="width: 75%; margin: 5px auto">
        <button type="submit" class="btn">Search</button>
    </div>
</form>

<div id="resultsDiv" style="width: 670px; margin: auto; display: none"></div>

<script type="text/javascript">
    // https://docs.djangoproject.com/en/dev/ref/csrf/#ajax
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    function spliceString(base, ins, idx) {
        return base.slice(0, idx) + ins + base.slice(idx);
    }

    let searchFloor = parseInt(3) - 1;
    if (localStorage.getItem('lastSearch')) {
        searchFloor = parseInt(localStorage.getItem('lastSearchFloor'));
        document.getElementById('search').value = localStorage.getItem('lastSearch');
        updateResults(JSON.parse(localStorage.getItem('librarySearchResults')));
    }
    if (searchFloor >= 3) {
        searchFloor = parseInt(3) - 1;
        hideResults();
    }
    updateSearchFloor();

    function truncateHex(hex) {
        let ret = hex;
        if (hex.length > 62) {
            ret = hex.substring(0, 30);
            ret += "..."
            ret += hex.substring(hex.length - 29)
        }
        return ret;
    }

    function updateResults(res) {
        let resultsDiv = document.getElementById('resultsDiv');
        resultsDiv.textContent = '';
        resultsDiv.appendChild(document.createElement('hr'));
        let heading = document.createElement('h3');
        heading.style.textAlign = 'center';
        heading.innerText = (!res ? 'No ' : '') + 'Results';
        resultsDiv.appendChild(heading);

        if (res) {
            for (const val in res) {
                let result = res[val];
                let thisResult = document.createElement('div');
                thisResult.style.fontFamily = 'Courier'
                thisResult.innerHTML = "Found a " +
                    "<a href='./browse.html?result=" + val + "'>match</a>" +
                    " on <b>Page " +
                    (result.page + 1) +
                    "</b> of <b>Wall " +
                    (result.wall + 1) +
                    "</b>, <b>Shelf " +
                    (result.shelf + 1) +
                    "</b>, <b>Volume " +
                    (result.volume + 1) +
                    "</b> in Hex " +
                    truncateHex(result.hex)
                ;
                resultsDiv.appendChild(thisResult);
                resultsDiv.appendChild(document.createElement('br'));
            }
        }

        let lastText = document.createElement('h4');
        lastText.style.textAlign = 'center';
        lastText.innerText = res ? 'Search again for more results!' : 'You must include at least one character contained in the Library!';
        resultsDiv.appendChild(lastText);
        resultsDiv.appendChild(document.createElement('br'));
        resultsDiv.style.display = 'block';
    }

    function hideResults() {
        document.getElementById('resultsDiv').style.display = 'none';
    }

    function updateSearchFloor() {
        document.getElementById('floor1').classList.remove("floor-selected");
        
        document.getElementById('floor2').classList.remove("floor-selected");
        
        
        document.getElementById('floor3').classList.remove("floor-selected");
        
        document.getElementById('floor' + (searchFloor + 1)).classList.add("floor-selected");
        document.getElementById('floorLabel').innerText = 'Floor ' + (searchFloor + 1);
    }

    document.getElementById('floor1').addEventListener('click', () => {
        searchFloor = 0;
        updateSearchFloor();
        hideResults();
    });

    
    document.getElementById('floor2').addEventListener('click', () => {
        searchFloor = 1;
        updateSearchFloor();
        hideResults();
    });
    

    
    document.getElementById('floor3').addEventListener('click', () => {
        searchFloor = 2;
        updateSearchFloor();
        hideResults();
    });
    

    document.addEventListener('DOMContentLoaded', () => {
        async function submitSearch() {
            let search = $('#search')
            let submit = $('#submit')
            search.prop("disabled", true);
            submit.prop("disabled", true);

            let csrftoken = getCookie('csrftoken');
            try {
                let searchText = search.val().toLowerCase().replaceAll(/[^a-z,. ]/g, "");
                if (searchText.length > 3200) {
                    searchText = searchText.substr(0, 3200)
                }
                if (searchText.length < 1) {
                    updateResults();
                } else {
                    localStorage.setItem('lastSearchFloor', searchFloor);
                    localStorage.setItem('lastSearch', searchText);
                    let result = search_by_request({
                        floor: searchFloor,
                        search: searchText
                    });
                    localStorage.setItem('librarySearchResults', JSON.stringify(result));
                    updateResults(result);
                }
            } catch (e) {
                // This error handling will be very poor.
                $('#output').text(`Error: ${e}`);
            }
            // calls you might make: .val(""), .select(), .focus()
            search.prop("disabled", false);
            submit.prop("disabled", false);
        }
        $('#library-search-form').on('submit', submitSearch);
    });
</script>


    </div>
    <script>
        const skipToMainLink = document.querySelector("a.skip-to-main");
        const mainContentElement = document.getElementsByTagName("main")?.item(0) || document.querySelector("div.content");
        if (skipToMainLink && mainContentElement) {
            const mainContentAnchor = document.createElement("a");
            const anchorId = "main-content-anchor"
            mainContentAnchor.className = anchorId;
            mainContentAnchor.id = anchorId;
            skipToMainLink.href = `#${anchorId}`;
            mainContentElement.parentNode.insertBefore(mainContentAnchor, mainContentElement);
        }
    </script>
    <footer>
        Powered by <a href="https://github.com/galacticpuzzlehunt/gph-site">gph-site</a>
    </footer>
</body>

<!-- Mirrored from www.shardhunt.com/the-library/search by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 20 Nov 2023 02:39:06 GMT -->
</html>
